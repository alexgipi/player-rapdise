(this["webpackJsonpreact-rapdise-player"]=this["webpackJsonpreact-rapdise-player"]||[]).push([[0],{100:function(e,c,t){"use strict";t.r(c);var s=t(1),a=t.n(s),n=t(38),i=t.n(n),l=(t(74),t(75),t(22)),r=t(14),o=t(27),j=t(25),d=t(3),b=t(0);var m=function(){return Object(b.jsx)(a.a.Fragment,{children:Object(b.jsx)("main",{className:"App-content",children:Object(b.jsxs)("div",{className:"error error-404",children:[Object(b.jsx)("img",{src:"https://miro.medium.com/max/1838/1*zE2qnVTJehut7B8P2aMn3A.gif",alt:""}),Object(b.jsx)("h1",{className:"error-title",children:"Pagina no encontrada"}),Object(b.jsx)("p",{children:"La p\xe1gina a la que intentas acceder no existe en la web"})]})})})},u=t(4),O=t(28),h=t.n(O),x={url:"http://localhost:3700/api/"},p=function(){var e=a.a.createRef(),c=a.a.createRef(),t=Object(s.useState)({}),n=Object(u.a)(t,2),i=n[0],l=n[1],r=Object(s.useState)({}),o=Object(u.a)(r,2),j=(o[0],o[1]),m=Object(s.useState)({}),O=Object(u.a)(m,2),p=(O[0],O[1]),g=Object(s.useState)(""),N=Object(u.a)(g,2),f=N[0],v=N[1],y=x.url,k=Object(d.h)().userNick,_=function(e){h.a.post(y+"login",e).then((function(c){if(c.data.user){var t=c.data.user;j(t),console.log(t),v("success"),localStorage.setItem("identity",JSON.stringify(t)),w(e)}else v("error")}))},w=function(e){e.gettoken="true",h.a.post(y+"login",e).then((function(e){console.log(e.data.token),p(e.data.token),localStorage.setItem("token",e.data.token)}))};return"success"===f?Object(b.jsx)(d.a,{to:"/"+k}):Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("img",{className:"login-logo",src:"https://rapdise.com/assets/logo/rapdise-png4.webp",alt:""}),Object(b.jsx)("h1",{className:"login-title",children:"Inicia sesi\xf3n para continuar"}),i.email&&Object(b.jsxs)("p",{children:["Email: ",Object(b.jsx)("b",{children:i.email})]}),i.password&&Object(b.jsxs)("p",{children:["Password: ",Object(b.jsx)("b",{children:i.password})]}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var s={email:e.current.value,password:c.current.value,gettoken:null};l(s),console.log("formulario enviado"),console.log(s),_(s)},className:"login-form",children:[Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico o nombre de usuario"}),Object(b.jsx)("input",{name:"email",id:"email",ref:e,type:"text",placeholder:"Introduce tu correo electr\xf3nico"})]}),Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(b.jsx)("input",{name:"password",id:"password",ref:c,type:"password",placeholder:"Introduce tu contrase\xf1a"})]}),Object(b.jsx)("div",{className:"actions",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-login",children:"Iniciar sesion"})}),Object(b.jsx)("div",{className:"or-separator",children:Object(b.jsx)("span",{children:"O"})}),Object(b.jsxs)("div",{className:"actions",children:[Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Google"}),Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Twitter"}),Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Facebook"})]}),Object(b.jsxs)("p",{className:"register-message",children:["\xbfNo tienes una cuenta? ",Object(b.jsx)("a",{href:"/register",children:"Registrarse"})]})]})]})},g=t(20),N=t.n(g),f=t(21),v=t.n(f),y=t(53),k=t.n(y),_=t(16),w=function(e){Object(o.a)(t,e);var c=Object(j.a)(t);function t(){var e;Object(l.a)(this,t);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return(e=c.call.apply(c,[this].concat(a))).vendorNick=e.props.userNick,e.playerTitle=Object(b.jsx)("h2",{className:"player-title",children:e.vendorNick}),e.state={identity:JSON.parse(localStorage.getItem("identity"))},e.url=x.url,e.logout=function(){e.setState({identity:null}),localStorage.removeItem("identity")},e}return Object(r.a)(t,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)(_.b,{to:"/",children:this.playerTitle})}),Object(b.jsxs)("div",{className:"header__search",children:[Object(b.jsx)("input",{type:"text",placeholder:"Buscar instrumentales"}),Object(b.jsx)(k.a,{className:"icon search-icon"})]}),Object(b.jsxs)("div",{className:"header__right-menu",children:[Object(b.jsxs)("div",{className:"header__cart",children:[Object(b.jsx)(N.a,{className:"cart-icon"}),Object(b.jsxs)("span",{className:"price",children:["0.00",Object(b.jsx)("span",{className:"currency",children:"\u20ac"})]})]}),this.state.identity?Object(b.jsx)("div",{className:"user-logged-panel",children:Object(b.jsxs)("div",{onClick:this.logout,className:"user-chip",children:[Object(b.jsx)("img",{src:this.url+"get-image-user/"+this.state.identity.image+"?width=40&height=40",alt:""}),Object(b.jsx)("span",{children:this.state.identity.nick})]})}):Object(b.jsx)("button",{className:"btn-login",children:Object(b.jsxs)(_.b,{to:"/"+this.vendorNick+"/login",children:[Object(b.jsx)("span",{className:"btn-login-text",children:"Iniciar sesi\xf3n"}),Object(b.jsx)("span",{className:"btn-login-text-small",children:"Login"})]})})]})]})}}]),t}(s.Component),S=w,C=t(65),I=t.n(C),B=t(58),R=t.n(B),F=t(59),T=t.n(F),P=t(57),A=t.n(P),E=t(60),M=t.n(E),J=t(61),L=t.n(J),D=t(56),V=t.n(D),q=t(62),G=t.n(q),z=t(63),H=t.n(z),K=t(64),Q=t.n(K),U=t(114);function W(e,c){var t=x.url,a=Object(s.useRef)(null),n=Object(s.useState)(0),i=Object(u.a)(n,2),l=i[0],r=i[1],o=Object(s.useState)(0),j=Object(u.a)(o,2),d=j[0],m=j[1],O=Object(s.useState)(!1),h=Object(u.a)(O,2),p=h[0],g=h[1],N=Object(s.useState)(!1),f=Object(u.a)(N,2),y=f[0],k=f[1],_=(Object(s.useRef)(),Object(s.useState)(0)),w=Object(u.a)(_,2),S=w[0],C=w[1],B=Object(s.useState)(1),F=Object(u.a)(B,2),P=F[0],E=F[1],J=e.beats[e.currentBeatIndex];Object(s.useImperativeHandle)(c,(function(){return{playFromOutside:function(){setTimeout((function(){a.current.play()}),100)}}}),[]),Object(s.useEffect)((function(){J&&(a.current.onloadedmetadata=function(){var e=Math.floor(a.current.duration);r(e)},a.current.onplaying=function(){e.setIsPlaying(!0)},a.current.onpause=function(){e.setIsPlaying(!1)},a.current.onended=function(){y?a.current.play():K()},a.current.ontimeupdate=function(){m(a.current.currentTime),C(a.current.currentTime)})}));var D=function(e){var c=Math.floor(e/60),t="".concat(c),s=Math.floor(e%60),a=s<10?"0".concat(s):"".concat(s);return"".concat(t,":").concat(a)},q=function(){var c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c?e.setCurrentBeatIndex((function(){var c=e.currentBeatIndex;return++c>e.beats.length-1&&(c=0),e.setSelectedBeat(e.beats[c]),c})):e.setCurrentBeatIndex((function(){var c=e.currentBeatIndex;return--c<0&&(c=e.beats.length-1),e.setSelectedBeat(e.beats[c]),c})),setTimeout((function(){a.current.play()}),100)},z=function(){a.current.paused&&!e.isPlaying?a.current.play():!a.current.paused&&e.isPlaying&&a.current.pause()},K=function(){q()};return Object(b.jsxs)("div",{className:"player",children:[Object(b.jsxs)("div",{className:"player__info",children:[Object(b.jsx)("div",{className:"cover",children:J&&J.image?Object(b.jsx)("img",{src:t+"get-imagen-beat/"+J.image+"?width=50&height=50",alt:""}):Object(b.jsx)(v.a,{className:"icon album-icon"})}),Object(b.jsxs)("div",{className:"details",children:[J?Object(b.jsx)("h3",{className:"title",children:J.name}):Object(b.jsx)("h3",{className:"title",children:"Cargando..."}),Object(b.jsx)("span",{className:"autor",children:J&&J.user&&J.user.nick})]})]}),J&&Object(b.jsx)("audio",{preload:"true",src:t+"/get-audio-beat/"+J.file,ref:a,controls:!0}),Object(b.jsxs)("div",{className:"player__controls",children:[Object(b.jsx)(V.a,{onClick:function(){g(!p)},className:"icon shuffle-icon ".concat(p?"active":"")}),Object(b.jsx)(A.a,{onClick:function(){q(!1)},className:"icon prev-icon"}),e.isPlaying?Object(b.jsx)(T.a,{onClick:z,className:"icon pause-icon"}):Object(b.jsx)(R.a,{onClick:z,className:"icon play-icon"}),Object(b.jsx)(M.a,{onClick:K,className:"icon next-icon"}),Object(b.jsx)(L.a,{onClick:function(){k(!y)},className:"icon repeat-icon ".concat(y?"active":"")}),Object(b.jsxs)("div",{className:"player-times",children:[Object(b.jsx)("span",{className:"player-times__current",children:D(d)}),Object(b.jsx)("span",{className:"player-times__sep",children:"/"}),Object(b.jsx)("span",{className:"player-times__duration",children:l&&!isNaN(l)&&D(l)})]}),Object(b.jsx)(U.a,{"aria-label":"Current time",step:.01,value:S,onChange:function(e,c){a.current.pause(),C(c),m(c),a.current.currentTime=c},onChangeCommitted:function(e,c){a.current.play()},min:0,max:l})]}),Object(b.jsxs)("div",{className:"volume-control",children:[0===P?Object(b.jsx)(G.a,{className:"icon vol-mute"}):P>0&&P<=.5?Object(b.jsx)(H.a,{className:"icon vol-down"}):Object(b.jsx)(Q.a,{className:"icon vol-up"}),Object(b.jsx)(U.a,{"aria-label":"Volume",step:.05,value:P,min:0,max:1,onChange:function(e,c){console.log({newValue:c}),E(c),a.current.volume=c}})]}),Object(b.jsx)("div",{className:"player__actions",children:Object(b.jsxs)("button",{className:"btn",children:[Object(b.jsx)(I.a,{onClick:function(){alert("comprar")},className:"icon"})," ",Object(b.jsx)("span",{className:"text",children:"Comprar"})]})})]})}var X=Object(s.forwardRef)(W),Y=t(42),Z=t.n(Y),$=t(66),ee=t.n($),ce=function(e){var c=e.selectedBeat,t=x.url;return Object(b.jsxs)("li",{className:"selected-item",children:[Object(b.jsx)("div",{className:"selected-item__cover",children:c.image?Object(b.jsx)("img",{src:t+"get-imagen-beat/"+c.image+"?width=160&height=160",alt:""}):Object(b.jsx)(v.a,{className:"icon album-icon"})}),Object(b.jsxs)("div",{className:"selected-item__details",children:[Object(b.jsx)("h2",{className:"selected-item__title",children:c.name}),Object(b.jsxs)("div",{className:"selected-item__tags",children:[Object(b.jsxs)("span",{className:"tag",children:["#",c.style&&c.style[0]]}),c.tags&&c.tags.map((function(e,c){return Object(b.jsx)("span",{className:"tag",children:e},"tag"+c)}))]}),Object(b.jsx)("div",{className:"selected-item__actions",children:Object(b.jsxs)("button",{className:"btn add-to-cart-btn",children:[Object(b.jsx)(N.a,{className:"icon"})," ",Object(b.jsx)("span",{className:"text",children:"A\xf1adir al carrito"})]})})]})]})};var te=function(e){var c=Object(s.useRef)(),t=x.url,n=Object(s.useState)({}),i=Object(u.a)(n,2),l=(i[0],i[1]),r=Object(s.useState)(!1),o=Object(u.a)(r,2),j=o[0],m=o[1],O=Object(s.useState)({}),p=Object(u.a)(O,2),g=p[0],f=p[1],y=Object(s.useState)(null),k=Object(u.a)(y,2),_=k[0],w=k[1],S=Object(s.useState)(0),C=Object(u.a)(S,2),I=C[0],B=C[1],R=Object(s.useState)(I+1),F=Object(u.a)(R,2),T=(F[0],F[1]),P=Object(s.useState)({}),A=Object(u.a)(P,2),E=A[0],M=A[1],J=Object(s.useState)(!1),L=Object(u.a)(J,2),D=L[0],V=L[1],q=Object(d.h)().userNick;Object(s.useEffect)((function(){console.log(q),G(q)}),[]);var G=function(e){h.a.get("".concat(t,"user/").concat(e)).then((function(e){if(console.log(e.data),e.data.user){var c=e.data.user;console.log(c),l(c),z(c._id,"Todo",!1,"mas-reciente",!1,40,1)}else w("error")}))},z=function(e,c,s,a,n,i,l){V(!0),h.a.get("".concat(t,"beats-filtro-estilos-paginado-usuario/").concat(e,"/").concat(c,"/").concat(s,"/").concat(a,"/").concat(n,"/").concat(i,"/").concat(l)).then((function(e){console.log(e.data.beats),e.data.beats&&(f(e.data.beats),w("success"),V(!1),M(e.data.beats[0]))}))};return Object(s.useEffect)((function(){T((function(){return I+1>g.length-1?0:I+1}))}),[I]),"error"===_?Object(b.jsx)(d.a,{to:"/"}):Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsxs)("main",{className:"App-content",children:[Object(b.jsx)(ce,{selectedBeat:E}),Object(b.jsxs)("div",{className:"playlist",children:[Object(b.jsx)("div",{className:"playlist__header"}),"success"===_&&Object(b.jsx)("ul",{className:"playlist__items",children:g.map((function(e,s){return Object(b.jsxs)("li",{onClick:function(){!function(e,t){M(e),B(t),T(t+1),c.current.playFromOutside()}(e,s)},className:"item",children:[Object(b.jsxs)("div",{className:"gridcell gridcell--cover",children:[E._id===e._id?Object(b.jsxs)("div",{className:"playing-state ".concat(j||E._id===e._id?"playing":""),children:[!j&&Object(b.jsx)(Z.a,{className:"icon play"}),j&&Object(b.jsx)(ee.a,{className:"icon pause"})]}):Object(b.jsx)("div",{className:"playing-state",children:Object(b.jsx)(Z.a,{className:"icon play"})}),Object(b.jsx)("div",{className:"gridcell-content",children:e.image?Object(b.jsx)("img",{src:t+"get-imagen-beat/"+e.image+"?width=50&height=50",alt:""}):Object(b.jsx)(v.a,{className:"icon album-icon"})})]}),Object(b.jsx)("div",{className:"gridcell gridcell--title",children:e.name}),Object(b.jsx)("div",{className:"gridcell gridcell--duration",children:Object(b.jsx)("div",{className:"gridcell-content",children:e.duration&&"null"!==e.duration&&""!==e.duration&&"0NaN:0NaN"!==e.duration&&"Infinity:0NaN"!==e.duration?e.duration:"0:00"})}),Object(b.jsx)("div",{className:"gridcell gridcell--bpm",children:Object(b.jsxs)("div",{className:"gridcell-content",children:[e.bpm&&"null"!==e.bpm?e.bpm:0," BPM"]})}),Object(b.jsxs)("div",{className:"gridcell gridcell--tags",children:[Object(b.jsxs)("span",{className:"tag",children:["#",e.style[0]]}),e.tags.map((function(e,c){return Object(b.jsx)("span",{className:"tag",children:e},"tag"+c)}))]}),Object(b.jsx)("div",{className:"gridcell gridcell--actions",children:Object(b.jsxs)("div",{className:"gridcell-content",children:[Object(b.jsxs)("span",{className:"price",children:["19.99",Object(b.jsx)("span",{className:"currency",children:"\u20ac"})]}),Object(b.jsx)("button",{className:"btn add-cart",children:Object(b.jsx)(N.a,{className:"icon"})})]})})]},e._id)}))}),D&&Object(b.jsx)("ul",{className:"playlist__items skeleton",children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(e,c){return Object(b.jsxs)("li",{className:"item",children:[Object(b.jsx)("div",{className:"gridcell gridcell--cover skeleton-box",children:Object(b.jsx)("div",{className:"gridcell-content",children:Object(b.jsx)(v.a,{className:"icon album-icon"})})}),Object(b.jsx)("div",{className:"gridcell gridcell--title",children:Object(b.jsx)("div",{className:"gridcell-content skeleton-box",children:"Bombap, Trap, Lofi, TypeBeat"})}),Object(b.jsx)("div",{className:"gridcell gridcell--duration",children:Object(b.jsx)("div",{className:"gridcell-content skeleton-box",children:"00:00"})}),Object(b.jsx)("div",{className:"gridcell gridcell--bpm",children:Object(b.jsx)("div",{className:"gridcell-content skeleton-box",children:"0"})}),Object(b.jsx)("div",{className:"gridcell gridcell--tags",children:Object(b.jsxs)("div",{className:"gridcell-content",children:[Object(b.jsx)("span",{className:"tag skeleton-box",children:"#hip hop"}),Object(b.jsx)("span",{className:"tag skeleton-box",children:"#Boom Bap"}),Object(b.jsx)("span",{className:"tag skeleton-box",children:"#Trap"})]})}),Object(b.jsx)("div",{className:"gridcell gridcell--actions",children:Object(b.jsxs)("div",{className:"gridcell-content",children:[Object(b.jsxs)("span",{className:"price",children:["19.99",Object(b.jsx)("span",{className:"currency",children:"\u20ac"})]}),Object(b.jsxs)("button",{className:"btn add-cart",children:[Object(b.jsx)(N.a,{className:"icon"}),"Add"]})]})})]},c)}))})]})]}),Object(b.jsx)(X,{ref:c,currentBeatIndex:I,setCurrentBeatIndex:B,setSelectedBeat:M,beats:g,isPlaying:j,setIsPlaying:m})]})};var se=function(){var e=this,c=a.a.createRef(),t=a.a.createRef(),n=a.a.createRef(),i=Object(s.useState)({}),l=Object(u.a)(i,2),r=l[0],o=l[1];return Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("img",{className:"login-logo",src:"https://rapdise.com/assets/logo/rapdise-png4.webp",alt:""}),Object(b.jsx)("h1",{className:"login-title",children:"Registrarse"}),r.email&&Object(b.jsxs)("p",{children:["Email: ",Object(b.jsx)("b",{children:r.email})]}),r.nick&&Object(b.jsxs)("p",{children:["Nick: ",Object(b.jsx)("b",{children:r.nick})]}),r.password&&Object(b.jsxs)("p",{children:["Password: ",Object(b.jsx)("b",{children:r.password})]}),Object(b.jsxs)("form",{onSubmit:function(c){c.preventDefault();var t={email:e.emailRef.current.value,nick:e.nickRef.current.value,password:e.passwordRef.current.value};o(t),console.log("formulario enviado"),console.log(t)},className:"login-form",children:[Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Correo electr\xf3nico"}),Object(b.jsx)("input",{name:"email",id:"email",ref:c,type:"email",placeholder:"Introduce tu correo electr\xf3nico"})]}),Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Nombre de usuario"}),Object(b.jsx)("input",{name:"nick",id:"nick",ref:t,type:"text",placeholder:"Crea un nombre de usuario"})]}),Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(b.jsx)("input",{name:"password",id:"password",ref:n,type:"password",placeholder:"Introduce tu contrase\xf1a"})]}),Object(b.jsxs)("div",{className:"login-form-input",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Repetir contrase\xf1a"}),Object(b.jsx)("input",{name:"password",id:"password",ref:n,type:"password",placeholder:"Repite la contrase\xf1a"})]}),Object(b.jsx)("div",{className:"actions",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-login",children:"Crear cuenta"})}),Object(b.jsx)("div",{className:"or-separator",children:Object(b.jsx)("span",{children:"O"})}),Object(b.jsxs)("div",{className:"actions",children:[Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Google"}),Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Twitter"}),Object(b.jsx)("a",{href:"/home",className:"btn btn-social",children:"Iniciar sesion con Facebook"})]}),Object(b.jsxs)("p",{className:"register-message",children:["\xbfNo tienes una cuenta? ",Object(b.jsx)("a",{href:"/register",children:"Registrarse"})]})]})]})};s.Component,s.Component;function ae(){var e=Object(d.h)().userNick;return Object(b.jsxs)("div",{children:[Object(b.jsx)(S,{userNick:e}),Object(b.jsx)(d.d,{children:Object(b.jsx)(d.b,{exact:!0,path:"/",element:Object(b.jsx)(te,{})})})]})}function ne(){return Object(b.jsx)("div",{children:Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{exact:!0,path:"/:userNick/login",element:Object(b.jsx)(p,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/:userNick/register",element:Object(b.jsx)(se,{})}),Object(b.jsx)(d.b,{path:"/:userNick/*",element:Object(b.jsx)(ae,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/",element:Object(b.jsx)(m,{})})]})})}var ie=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(ne,{})})},le=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,116)).then((function(c){var t=c.getCLS,s=c.getFID,a=c.getFCP,n=c.getLCP,i=c.getTTFB;t(e),s(e),a(e),n(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(_.a,{children:Object(b.jsx)(ie,{})})}),document.getElementById("root")),le()},74:function(e,c,t){},75:function(e,c,t){}},[[100,1,2]]]);
//# sourceMappingURL=main.1d9dfbce.chunk.js.map